{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.array.find-index.js","webpack:///./node_modules/gatsby-plugin-google-analytics/index.js","webpack:///./src/components/filterListItem.js","webpack:///./src/components/filterList.js","webpack:///./src/components/customElementCardListItem.js","webpack:///./src/components/customElementCardList.js","webpack:///./src/pages/index.js"],"names":["$export","$find","KEY","forced","Array","P","F","findIndex","callbackfn","this","arguments","length","undefined","_interopRequireDefault","require","exports","__esModule","OutboundLink","trackCustomEvent","_ref","category","action","label","value","_ref$nonInteraction","nonInteraction","transport","hitCallback","_ref$callbackTimeout","callbackTimeout","window","ga","trackingEventOptions","eventCategory","eventAction","eventLabel","eventValue","callback","opt_timeout","called","raceCallback","setTimeout","createFunctionWithTimeout","_extends2","_objectWithoutPropertiesLoose2","_react","_propTypes","props","rest","default","createElement","onClick","e","redirect","button","altKey","ctrlKey","metaKey","shiftKey","defaultPrevented","target","toLowerCase","href","document","location","propTypes","string","number","func","FilterListItem","id","onToggleCategory","htmlFor","className","title","checked","selected","name","type","onChange","FilterList","categories","onChangeSearchText","useState","searchText","setSearchText","style","display","required","maxLength","map","i","key","c","CustomElementCardListItem","customElement","readmeUrl","rel","padding","height","src","thumbnailUrl","publicURL","alt","description","margin","CustomElementCardList","customElements","cleanText","text","replace","textHasMatch","searchTextCleanStartsWith","searchTextCleanIncludes","textCleaned","startsWith","includes","IndexPage","data","initialCategories","distinct","sort","a","b","localeCompare","setCategories","activeCategories","filter","visibleElements","elements","edges","node","element","matchesCategoryFilter","some","satisfiesCategoryFilters","matchesSearchTextFilter","titleHasMatch","descriptionHasMatch","categoriesHasMatch","join","satisfiesSearchTextFilter","index","stateCategory","newCategories","t"],"mappings":"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","file":"component---src-pages-index-js-e6ada42d27f545f4f115.js","sourcesContent":["'use strict';\n// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(6);\nvar KEY = 'findIndex';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports.OutboundLink = OutboundLink;\nexports.trackCustomEvent = trackCustomEvent;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _objectWithoutPropertiesLoose2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutPropertiesLoose\"));\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar createFunctionWithTimeout = function createFunctionWithTimeout(callback, opt_timeout) {\n  if (opt_timeout === void 0) {\n    opt_timeout = 1000;\n  }\n\n  var called = false;\n\n  var raceCallback = function raceCallback() {\n    if (!called) {\n      called = true;\n      callback();\n    }\n  };\n\n  setTimeout(raceCallback, opt_timeout);\n  return raceCallback;\n};\n\nfunction OutboundLink(props) {\n  var eventCategory = props.eventCategory,\n      eventAction = props.eventAction,\n      eventLabel = props.eventLabel,\n      eventValue = props.eventValue,\n      rest = (0, _objectWithoutPropertiesLoose2.default)(props, [\"eventCategory\", \"eventAction\", \"eventLabel\", \"eventValue\"]);\n  return _react.default.createElement(\"a\", (0, _extends2.default)({}, rest, {\n    onClick: function onClick(e) {\n      if (typeof props.onClick === \"function\") {\n        props.onClick(e);\n      }\n\n      var redirect = true;\n\n      if (e.button !== 0 || e.altKey || e.ctrlKey || e.metaKey || e.shiftKey || e.defaultPrevented) {\n        redirect = false;\n      }\n\n      if (props.target && props.target.toLowerCase() !== \"_self\") {\n        redirect = false;\n      }\n\n      if (window.ga) {\n        window.ga(\"send\", \"event\", {\n          eventCategory: eventCategory || \"Outbound Link\",\n          eventAction: eventAction || \"click\",\n          eventLabel: eventLabel || props.href,\n          eventValue: eventValue,\n          transport: redirect ? \"beacon\" : \"\",\n          hitCallback: function hitCallback() {\n            if (redirect) {\n              document.location = props.href;\n            }\n          }\n        });\n      } else {\n        if (redirect) {\n          document.location = props.href;\n        }\n      }\n\n      return false;\n    }\n  }));\n}\n\nOutboundLink.propTypes = {\n  href: _propTypes.default.string,\n  target: _propTypes.default.string,\n  eventCategory: _propTypes.default.string,\n  eventAction: _propTypes.default.string,\n  eventLabel: _propTypes.default.string,\n  eventValue: _propTypes.default.number,\n  onClick: _propTypes.default.func\n};\n/**\n * This allows the user to create custom events within their Gatsby projects.\n *\n * @param {import('gatsby-plugin-google-analytics').CustomEventArgs} args\n * @see https://developers.google.com/analytics/devguides/collection/analyticsjs/field-reference#events\n */\n\nfunction trackCustomEvent(_ref) {\n  var category = _ref.category,\n      action = _ref.action,\n      label = _ref.label,\n      value = _ref.value,\n      _ref$nonInteraction = _ref.nonInteraction,\n      nonInteraction = _ref$nonInteraction === void 0 ? true : _ref$nonInteraction,\n      transport = _ref.transport,\n      hitCallback = _ref.hitCallback,\n      _ref$callbackTimeout = _ref.callbackTimeout,\n      callbackTimeout = _ref$callbackTimeout === void 0 ? 1000 : _ref$callbackTimeout;\n\n  if (typeof window !== \"undefined\" && window.ga) {\n    var trackingEventOptions = {\n      eventCategory: category,\n      eventAction: action,\n      eventLabel: label,\n      eventValue: value,\n      nonInteraction: nonInteraction,\n      transport: transport\n    };\n\n    if (hitCallback && typeof hitCallback === \"function\") {\n      trackingEventOptions.hitCallback = createFunctionWithTimeout(hitCallback, callbackTimeout);\n    }\n\n    window.ga(\"send\", \"event\", trackingEventOptions);\n  }\n}","import React from \"react\"\r\nimport PropTypes from \"prop-types\"\r\n\r\nfunction FilterListItem({ category, id, onToggleCategory}) {\r\n  return (\r\n    <li>\r\n      <label htmlFor={id} className=\"checkbox\">\r\n        {category.title}\r\n        <input\r\n          id={id}\r\n          checked={category.selected}\r\n          name={id}\r\n          type=\"checkbox\"\r\n          onChange={()=>onToggleCategory(category)}\r\n        ></input>\r\n        <span className=\"checkbox__indicator\"></span>\r\n      </label>\r\n    </li>\r\n  )\r\n}\r\n\r\nFilterListItem.propTypes = {\r\n  category: PropTypes.shape({\r\n    title: PropTypes.string,\r\n    selected: PropTypes.bool\r\n  }).isRequired,\r\n  id: PropTypes.number,\r\n  onToggleCategory: PropTypes.func\r\n}\r\n\r\nexport default FilterListItem\r\n","import React, { useState } from \"react\"\r\nimport PropTypes from \"prop-types\"\r\n\r\nimport FilterListItem from \"./filterListItem\"\r\n\r\nfunction FilterList({\r\n  title,\r\n  categories,\r\n  onToggleCategory,\r\n  onChangeSearchText,\r\n}) {\r\n  const [searchText, setSearchText] = useState(\"\")\r\n\r\n  return (\r\n    <div className=\"filter accordion\">\r\n      <div className=\"filter__heading accordion__heading\">{title}</div>\r\n      <div\r\n        className=\"form__input\"\r\n        style={{\r\n          display: \"block\",\r\n        }}\r\n      >\r\n        <input\r\n          type=\"text\"\r\n          className={`input input--text input--white js-input input--cesg ${\r\n            searchText.length > 0 ? \"js-filled\" : \"\"\r\n          }`}\r\n          name=\"search\"\r\n          id=\"search\"\r\n          required=\"\"\r\n          maxLength=\"100\"\r\n          value={searchText}\r\n          onChange={e => {\r\n            onChangeSearchText(e.target.value)\r\n            setSearchText(e.target.value)\r\n          }}\r\n        />\r\n        <label htmlFor=\"search\" className=\"label \">\r\n          Search\r\n        </label>\r\n      </div>\r\n\r\n      <div className=\"filter__checkboxes list list--no-bullets accordion__list\">\r\n        <ul>\r\n          {categories.map((category, i) => (\r\n            <FilterListItem\r\n              category={category}\r\n              id={i}\r\n              key={i}\r\n              onToggleCategory={c => onToggleCategory(c)}\r\n            />\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nFilterList.propTypes = {\r\n  title: PropTypes.string.isRequired,\r\n  categories: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      title: PropTypes.string,\r\n      selected: PropTypes.bool,\r\n    })\r\n  ),\r\n  onToggleCategory: PropTypes.func,\r\n  onChangeSearchText: PropTypes.func,\r\n}\r\n\r\nexport default FilterList\r\n","import React from \"react\"\r\nimport PropTypes from \"prop-types\"\r\nimport { trackCustomEvent } from 'gatsby-plugin-google-analytics'\r\n\r\nfunction CustomElementCardListItem({ customElement }) {\r\n  return (\r\n    <div className=\"card card--lg-2\">\r\n      <a\r\n        href={customElement.readmeUrl}\r\n        className=\"card__link-outer\"\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer\"\r\n        onClick={e=>{\r\n          trackCustomEvent({\r\n            category: \"CESG\",\r\n            action: \"Click Detail\",\r\n            label: customElement.title\r\n          })\r\n        }}\r\n      ></a>\r\n      <div className=\"card__content\">\r\n        <div className=\"card__heading  card__heading--small\">\r\n          <h3>{customElement.title}</h3>\r\n        </div>\r\n        <div\r\n          className=\"card__image card__image--no-bg\"\r\n          style={{\r\n            padding: \"24px 0\",\r\n            height: \"auto\",\r\n          }}\r\n        >\r\n          <img src={customElement.thumbnailUrl.publicURL} alt=\"Screenshot of element in action\" />\r\n        </div>\r\n        <div className=\"card__description\">\r\n          <p>{customElement.description}</p>\r\n        </div>\r\n        <div className=\"card__content-bottom\">\r\n          {customElement.categories &&\r\n            customElement.categories.map((c, i) => (\r\n              <span\r\n                key={i}\r\n                className=\"tag tag--orange\"\r\n                style={{\r\n                  margin: \"6px\",\r\n                }}\r\n              >\r\n                {c}\r\n              </span>\r\n            ))}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nCustomElementCardListItem.propTypes = {\r\n  customElement: PropTypes.object.isRequired,\r\n}\r\n\r\nexport default CustomElementCardListItem\r\n","import React from \"react\"\r\nimport PropTypes from \"prop-types\"\r\n\r\nimport CustomElementCardListItem from \"./customElementCardListItem\"\r\n\r\nfunction CustomElementCardList({ customElements }) {\r\n\r\n  return (\r\n    <div className=\"cards\">\r\n      {customElements.map(customElement => (\r\n        <CustomElementCardListItem key={customElement.id} customElement={customElement} />\r\n      ))}\r\n    </div>\r\n  )\r\n}\r\n\r\nCustomElementCardList.propTypes = {\r\n  customElements: PropTypes.arrayOf(PropTypes.object)\r\n}\r\n\r\nexport default CustomElementCardList\r\n","import React, { useState } from \"react\"\r\nimport { useStaticQuery, graphql } from \"gatsby\"\r\n\r\nimport Layout from \"../components/layout\"\r\nimport SEO from \"../components/seo\"\r\nimport FilterList from \"../components/filterList\"\r\nimport CustomElementCardList from \"../components/customElementCardList\"\r\n\r\nconst IndexPage = () => {\r\n  const data = useStaticQuery(\r\n    graphql`\r\n      query {\r\n        categories: allElementsJson {\r\n          distinct(field: categories)\r\n        }\r\n        elements: allElementsJson(sort: { fields: title }) {\r\n          edges {\r\n            node {\r\n              id\r\n              title\r\n              description\r\n              readmeUrl\r\n              thumbnailUrl {\r\n                publicURL\r\n              }\r\n              categories\r\n            }\r\n          }\r\n        }\r\n      }\r\n    `\r\n  )\r\n  const initialCategories = data.categories.distinct\r\n    .map(category => ({\r\n      title: category,\r\n      selected: false,\r\n    }))\r\n    .sort((a, b) => a.title.toLowerCase().localeCompare(b.title.toLowerCase()))\r\n\r\n  const [categories, setCategories] = useState(initialCategories)\r\n\r\n  const toggleCategory = category => {\r\n    const index = categories.findIndex(\r\n      stateCategory => stateCategory.title === category.title\r\n    )\r\n    const newCategories = [...categories]\r\n    newCategories[index] = { ...category, selected: !category.selected }\r\n    setCategories(newCategories)\r\n  }\r\n\r\n  const [searchText, setSearchText] = useState(\"\")\r\n\r\n  const activeCategories = categories.filter(c => c.selected).map(c => c.title)\r\n\r\n  const allElements = data.elements.edges.map(e => e.node)\r\n\r\n  const visibleElements = allElements.filter(element => {\r\n    const matchesCategoryFilter = satisfiesCategoryFilters(\r\n      element,\r\n      activeCategories\r\n    )\r\n    const matchesSearchTextFilter = satisfiesSearchTextFilter(\r\n      element,\r\n      searchText\r\n    )\r\n\r\n    return matchesCategoryFilter && matchesSearchTextFilter\r\n  })\r\n\r\n  return (\r\n    <Layout>\r\n      <SEO title=\"Home\" />\r\n      <section className=\"section grid\">\r\n        <div className=\"grid__row\">\r\n          <div className=\"grid__col grid__col--12\">\r\n            <div className=\"js-pagination-list\">\r\n              <div className=\"heading heading--h2 heading--center heading--indent-content\">\r\n                <h2>\r\n                  Custom element sample gallery\r\n                  <strong className=\"highlight\">.</strong>\r\n                </h2>\r\n              </div>\r\n              <div className=\"grid__row\">\r\n                <div className=\"grid__col grid__col--12 grid__col--md-3 grid__col--lg-span-2 grid__col--lg-2 js-integrations-filter-wrapper\">\r\n                  <div className=\"js-integrations-filter\">\r\n                    <FilterList\r\n                      title=\"Category\"\r\n                      categories={categories}\r\n                      onToggleCategory={c => toggleCategory(c)}\r\n                      onChangeSearchText={t => setSearchText(t)}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <div className=\"grid__col grid__col--12 grid__col--md-9 grid__col--lg-7\">\r\n                  <CustomElementCardList customElements={visibleElements} />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </Layout>\r\n  )\r\n}\r\n\r\nfunction satisfiesCategoryFilters(element, activeCategories) {\r\n  if (activeCategories.length < 1) {\r\n    return true\r\n  } else if (!element.categories) {\r\n    return false\r\n  }\r\n  return element.categories.some(c => activeCategories.includes(c))\r\n}\r\n\r\nfunction satisfiesSearchTextFilter(element, searchText) {\r\n  const minLength = 3\r\n\r\n  if (searchText && searchText.length >= minLength) {\r\n    const titleHasMatch = textHasMatch(element.title, searchText)\r\n    const descriptionHasMatch = textHasMatch(element.description, searchText)\r\n    const categories = element.categories.join(\" \")\r\n    const categoriesHasMatch = textHasMatch(categories, searchText)\r\n    return titleHasMatch || descriptionHasMatch || categoriesHasMatch\r\n  }\r\n  return true\r\n}\r\n\r\nfunction cleanText(text) {\r\n  const ignoredCharsRegex = /[!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~]/g\r\n  return text.toLowerCase().replace(ignoredCharsRegex, \"\")\r\n}\r\n\r\nfunction textHasMatch(text, searchText) {\r\n  const searchTextCleanStartsWith = cleanText(searchText)\r\n  const searchTextCleanIncludes = ` ${searchTextCleanStartsWith}`\r\n\r\n  const textCleaned = cleanText(text)\r\n  return (\r\n    textCleaned.startsWith(searchTextCleanStartsWith) ||\r\n    textCleaned.includes(searchTextCleanIncludes)\r\n  )\r\n}\r\n\r\nexport default IndexPage\r\n"],"sourceRoot":""}